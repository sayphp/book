# 前言

很久之前，给公司写js选课控件的时候，遇到过这个问题，当时还没有形成写Blog的习惯，或者写了，但是没有使用Git来保存，反正找不到记录了。很巧，今天同事在做教师课程选择的js控制开发的时候，遇到了类似的问题。帮助同事解决之后，打算将这个问题记录下来，方便以后回顾。好吧，我可能很久都不会看一眼0.0

# 问题

加载页面的时候，通过PHP把一个json对象直接写在了页面上，然后通过js去读取这个对象，然后innerhtml。

因为业务需求，返回的结果集需要倒序显示，然后，大家就在PHP层，把数据krsort了一下……

然并软-。-

# 解析

翻查了大量的资料，得出如下三点：

1. 由于ECMAScript标准，属性遍历的顺序是没有被规定的
2. JSON对象是无序的
3. PHP的数组和别的语言的数组是不一样的

所以，如果使用for-in或者jquery的each来遍历数据，结果很显然不尽如人意。

# 解决

针对这个问题的思路有两种：

1. 自己按照顺序解析JSON字符串，然后就可以获取到理想的顺序了
2. 将对象转换成数组，然后根据自己的需要排序

第一种实现方式成本略高，主要是不通用，返回内容稍微改变，就会尴尬

所以采用了第二种方案来解决。

使用for in 然后push()即可将对象转换成数组。

当然，因为数据录入的时候是顺序的，只需要逆向排序即可，所以使用reverse(）就可以了。

如果需要针对性排序，使用sort(function(a, b){ return a-b;})。
