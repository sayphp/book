> 之前以为自己看过设计模式之婵，又在自身框架上进行了应用，简单如单例模式，肯定是小菜一碟的。然而，万万没想到自己会阴沟里翻船。所以，从网上再查找一下相关资料，加入自己的武器库中来。

## 什么是单例模式

单例模式确保某个类只有一个实例，而且自行实例化并向争个系统提供这个实例。

## 为什么使用单例模式

使用单例模式可以避免大量的new操作。因为每一次new操作都会消耗系统和内存的资源。

## 单例模式特点（三私一公）

* 私有的构造方法（防止类外实例化）
* 私有的克隆方法（防止通过克隆生成对象）
* 私有的静态属性（保存类的实例）
* 共有的静态方法（调取这个类相当一个接口）

> 一般来说，应该还有一个私有属性用于存储句柄

##单例PHP代码

```php
final class db{
    
    private $handle;//私有变量，用于存储db句柄
    
    static private $db;//私有静态属性
    
    private function __construct(){//私有构造方法
        return $this->handle = new pdo();
    }
    
    static public function get_instance(){//共有静态方法，调取唯一入口
        if(!self::$db instanceof db) self::$db = new self();
        return self::$db;
    }
    
    private function __clone(){//私有的克隆方法
        echo '单例模式失败';
    }
}
```

## 总结

单例的主要用途就是全局仅实例化一次，所以在实现中基础的私有变量与私有方法都是为了保护类不被重复实例和调用，只能通过get_instance来进行实例化。不得不说，一个简单的单例却能反映出很多的问题，值得思考和反省。

