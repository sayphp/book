# gcc编译小汇总

记录一些在使用gcc的时候,出现的小困惑

## -lm是个什么梗?

在写一些c的程序的时候,必不可少需要使用到math.h的库,然后使用gcc编译程序,会提示未定义错误.

百度了结果,说是加上 -lm 就可以搞定了.

但是这个-lm到底是怎么回事,却是有些疑惑.

烦了一下网上的资料,man了一下gcc.

终于找到了一个自己认可的答案,记录一下:

首先,提示未定义错误,是因为gcc在编译时会对pow(5, 2)这样的使用方式进行优化,直接替换成了对应的值,而如果使用pow(i, m)这样的用法的时候,就会出现未定义的错误,所以我们要手动连接math库.

而我们include的库是math.h,为什么需要-lm呢??

其实,数学库(math.h)的实现是位于libm.so的,所以只需要-lm就可以了,而想一些线程支持的库,可能就需要写出它对应的lib*.so的名字,比如-lptread这样子的.

这就是-lm的梗,-l就是强制链接某些library.

## gcc编译.c文件,生成汇编文件

```shell
//中间文件,相当于链接之后,合并多有代码的C程序文件(自己写的代码和库的代码)
gcc -E test.c -o test.i

//汇编文件,生成该程序的汇编语言版本
gcc -S test.i -o test.s

//二进制执行文件,生成可执行的文件
gcc -c test.s -o test.o
```

## 反编译二进制文件到汇编

```shell
objdump -d test.o	
```
​	
